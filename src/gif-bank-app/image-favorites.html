<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-app.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="../../bower_components/iron-list/iron-list.html">

<dom-module id="image-favorites">
  <template>
    <style>

    /********* Favorites **********/
    #favorites {
      width: 500px;
      height: 500px;
      background-color: #5a855a;
      }
      
      .error {
        color: red;
      }

      paper-button {
        margin-top: 20px;
        background-color: #5a855a;
      }

      paper-input {
        width: 300px;
        height: 50px;

        background-color: white;
        border-radius: 5px;
      }

      #favoriteList {
        height: 200px;
        width: 900px;
      }
    </style>

    <firebase-query
    path="/user/[[uid]]/images"
    data="{{qryData}}">
    </firebase-query>

    <button type="button" on-click="test">test</button>

    <div id="favorites">
      <h1>Favorites</h1>

      <iron-list id="favoriteList" items="[[qryData]]" as="item">
        <template  >
          <div>
            <h1>url : [[item.$val]]</h1>
            <!-- <img id="image" src="[[item.image]]" height="200" width="200"> -->
          </div>
        </template>
      </iron-list>
    </div>

  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class ImageFavorites extends Polymer.Element {
      static get is() { return 'image-favorites'; }

      dataChanged(e) {
        console.log(e);
      }

      test() {
        var rootRef = firebase.database().ref();
        var userRef = rootRef.child("user");
        var email = localStorage.getItem('email');
        var localThis = this;

        userRef.orderByChild('email').equalTo(email).once("value", function(data) {
          console.log("HEREE" + user.images)
        })
      }

       static get properties() {

        return {
          uid: {
            type: String,
            value: localStorage.getItem('uid')
          },
          qryData: {
            type: Array,
            observer: 'dataChanged'
          },
          test: {
            type: String,
            value: localStorage.getItem('currentFav')
          }
        };
      }
    }

    window.customElements.define(ImageFavorites.is, ImageFavorites);
  </script>
</dom-module>